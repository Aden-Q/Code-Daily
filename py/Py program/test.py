import sympy as sy
import function as f
from tkinter import *

root = Tk()
root.title('查询身高体重')
root.maxsize(500, 400)
root.minsize(500, 400)
label1 = Label(root,text = "请输入生日：", font = ("楷体", 20)).grid(row = 0, padx = 30, pady = 50)
Label2 = Label(root, text = "请输入性别：", font = ("楷体", 20)).grid(row = 1,padx = 30, pady =10)
v1 = StringVar()
v2 = StringVar()
e1 = Entry(root, textvariable =v1, width = 30).grid(row = 0, column = 1)
e2 = Entry(root, textvariabl = v2, width = 30).grid(row = 1, column = 1)
text = Text(root, width = 30, height = 8)
text.grid(row=2, column = 1, pady = 30)
                                                            #text.insert(INSERT)调用insert方法来显示结果
x = sy.Symbol('x')
f = [-0.102226979773635*x**3 + 4.50222697977363*x + 50.4, 0.011134898868176*x**3 - 0.340085635925434*x**2 + 4.84231261569907*x + 50.2866381213582,
     -0.0423126156990689*x**3 - 0.0194005485219643*x**2 + 4.20094244089213*x + 50.7142182378961, 0.0581155639280995*x**3 - 0.923254165166479*x**2 + 6.91250329082567*x + 48.0026573879626,
     0.00985035998667103*x**3 - 0.344071717869338*x**2 + 4.59577350163711*x + 51.091630440214, 0.00248299612521643*x**3 - 0.233561259947519*x**2 + 4.04322121202802*x + 52.0125509228958,
     0.0802176555124632*x**3 - 1.63278512891796*x**2 + 12.4385644258507*x + 35.2218644952505, -0.0233536181750694*x**3 + 0.542211618520223*x**2 - 2.78641280621662*x + 70.7468113700742,
     0.0131968171878143*x**3 - 0.334998830188985*x**2 + 4.23127078345704*x + 52.0329884642778, -0.0294336505761878*x**3 + 0.816023799439071*x**2 - 6.12793288319546*x + 83.1105994642353,
     0.00453778511693684*x**3 - 0.203119271354668*x**2 + 4.06349782474192*x + 49.1391637711107, 0.0112825101084404*x**3 - 0.425695196074285*x**2 + 6.51183299665772*x + 40.1619348074194,
     -0.00117979568998193*x**3 + 0.022947812668919*x**2 + 1.12811689173927*x + 61.6967992270932, 0.00410071841538188*x**3 - 0.214675322072453*x**2 + 4.69246391285984*x + 43.8750641214904,
     -0.000408263156730776*x**3 + 0.0288096828216309*x**2 + 0.309733824766339*x + 70.1714446500514, -0.00246766578845878*x**3 + 0.158552048620495*x**2 - 2.41485585700981*x + 89.2435724224844,
     -0.000832184800545224*x**3 + 0.0407974174907191*x**2 + 0.411255290104814*x + 66.6346832455674, 0.00209270128693597*x**3 - 0.196118355595257*x**2 + 6.80798116342618*x + 9.06415038567512,
     0.00357249076391246*x**3 - 0.329299408523142*x**2 + 10.8034127512627*x - 30.8901654926901, -0.0126789606388821*x**3 + 1.27959428035352*x**2 - 42.2900789816671*x + 553.138243569538,
     0.0175137221619863*x**3 - 1.98121546214027*x**2 + 75.0990717481093*x - 855.531565187779, -0.00922777986091504*x**3 + 1.14754027453919*x**2 - 46.9224019823896*x + 730.747593308707,
     0.000878878763155326*x**3 - 0.125898712093677*x**2 + 6.56203545619077*x - 18.0345308314185, 0.00200856110459004*x**3 - 0.278405828187362*x**2 + 13.4248556804066*x - 120.976834194657,
     -0.00150571577410806*x**3 + 0.227650042345164*x**2 - 10.8658261051546*x + 267.674074374324, 0.00031059828813851*x**3 - 0.0502460091785619*x**2 + 3.30687252255538*x + 26.7381977032535,
     0.000263322621554022*x**3 - 0.0425873511918748*x**2 + 2.89330499127428*x + 34.1824132663133, -0.0013638887743546*x**3 + 0.235665797508499*x**2 - 12.967124484647*x + 335.530573308818,
     0.00148852877216067*x**3 - 0.277769360864249*x**2 + 17.8389850177178*x - 280.591616738479, -0.000886522610584367*x**3 + 0.171115350474563*x**2 - 10.4407517966273*x + 313.282856362769,
     -0.0016461420335269*x**3 + 0.321519996217185*x**2 - 20.3674584156403*x + 531.670401981056, 0.00376738704098827*x**3 - 0.799080522207456*x**2 + 56.9539773556599*x - 1246.72262075885,
     -0.00231229501931507*x**3 + 0.514130802818065*x**2 - 37.5972380461776*x + 1022.50654888525, 0.00177808933256829*x**3 - 0.406205676355691*x**2 + 31.427997891854*x - 703.124349565541]
k = [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 15, 18, 21, 24, 27, 30, 33, 36, 39, 42, 45, 48, 51, 54, 57, 60, 63, 66, 69, 72, 75, 78, 81]
def show():
    text.delete(1.0, END)
    vs = v1.get()
    vs = vs.split('/')
    month = int(vs[1])
    year = int(vs[0])
    monage = (2017 - year) * 12 + (11 - month)                                                       #缺少三次样条的函数定位
    for i in range(35):
        if k[i] <= monage and k[i+1] > monage:
            break
    if(v2.get() == '男'):
        text.insert(INSERT, '标准身高为：')
        text.insert(INSERT, '%.1f' % round(f[i].subs(x, monage), 1))
        text.insert(INSERT, '\n')
    else:
        text.insert(INSERT, '输入有误，请重新输入！')
b = Button(root, text = "查 询", font = ("楷体"), width = 15, command = show).grid(row = 2, pady = 30)

mainloop()